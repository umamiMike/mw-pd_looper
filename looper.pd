#N canvas 131 81 1281 765 10;
#X obj 197 135 tgl 25 0 empty empty empty 17 7 0 25 -262144 -1 -1 0
1;
#X obj 586 365 *;
#X obj 626 355 samplerate~;
#X obj 565 344 t f b;
#N canvas 426 167 813 514 set 0;
#X obj 314 83 inlet;
#X obj 314 205 realtime;
#X obj 314 109 t b b;
#X obj 153 201 +;
#X obj 126 200 f;
#X msg 153 159 1;
#X obj 359 178 spigot;
#X obj 126 285 > 1;
#X obj 618 330 sel 1;
#X msg 126 159 0;
#X obj 642 195 metro 1;
#X obj 642 251 +;
#X obj 618 251 f;
#X msg 642 215 1;
#X msg 614 215 0;
#X obj 172 255 sel 1;
#X obj 642 170 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 314 350 +;
#X obj 288 350 f;
#X obj 618 282 spigot;
#X obj 288 402 /;
#X obj 199 361 - 1;
#X obj 315 485 outlet;
#X obj 275 86 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 341 463 12 0 0 0 - - -, f 12;
#X obj 126 306 s TAP_not_first;
#X obj 392 156 r TAP_not_first;
#X obj 671 253 r TAP_not_first;
#X obj 172 277 s TAP_start;
#X obj 642 148 r TAP_start;
#X obj 288 439 sel 0;
#X obj 618 311 > 3000;
#X obj 618 351 s TAP_finish;
#X obj 614 125 r TAP_finish;
#X obj 126 136 r TAP_finish;
#X msg 288 329 0;
#X obj 288 306 r TAP_finish;
#X text 500 24 A timer gets triggered and reset every time;
#X text 499 38 the inlet receives a bang. If nothing happens;
#X text 498 53 afterwards for 3000 ms \, the "tempo" is considered
;
#X text 498 68 definitive \, and everything gets reset.;
#X text 498 90 comment;
#X text 12 189 Count the number;
#X text 12 201 of bangs received.;
#X text 385 199 Measure the time between;
#X text 385 212 two bangs (making sure that;
#X text 386 223 we only start measuring at;
#X text 386 235 the second bang).;
#X text 358 342 Sum the measured durations...;
#X text 336 403 ... and divide it by the number of bangs-1;
#X text 336 417 to get the average time between 2 bangs.;
#X text 558 490 Pierre Massat \, Guitar Extended \, 2013;
#X text 6 2 "Tap tempo" : we don't measure the tempo;
#X text 5 16 here \, but the duration between 2 beats (bangs).;
#X text 5 30 This is used later to set the length of the loop.;
#X connect 0 0 2 0;
#X connect 1 0 17 0;
#X connect 2 0 1 0;
#X connect 2 1 5 0;
#X connect 2 1 6 0;
#X connect 2 1 14 0;
#X connect 3 0 4 0;
#X connect 4 0 3 1;
#X connect 4 0 7 0;
#X connect 4 0 21 0;
#X connect 4 0 15 0;
#X connect 5 0 3 0;
#X connect 6 0 1 1;
#X connect 7 0 25 0;
#X connect 8 0 32 0;
#X connect 9 0 4 0;
#X connect 10 0 13 0;
#X connect 11 0 12 0;
#X connect 12 0 11 1;
#X connect 12 0 19 0;
#X connect 13 0 11 0;
#X connect 14 0 12 0;
#X connect 15 0 28 0;
#X connect 16 0 10 0;
#X connect 17 0 18 0;
#X connect 18 0 17 1;
#X connect 18 0 20 0;
#X connect 19 0 31 0;
#X connect 20 0 30 0;
#X connect 21 0 20 1;
#X connect 23 0 2 0;
#X connect 26 0 6 1;
#X connect 27 0 19 1;
#X connect 29 0 16 0;
#X connect 30 1 22 0;
#X connect 30 1 24 0;
#X connect 31 0 8 0;
#X connect 33 0 16 0;
#X connect 34 0 9 0;
#X connect 35 0 18 0;
#X connect 36 0 35 0;
#X restore 569 245 pd set tempo;
#X obj 627 115 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 565 310 / 1000;
#X obj 73 340 r~ main_out;
#X obj 145 389 +~;
#X obj 149 233 *~;
#X obj 168 208 line~;
#X obj 170 185 pack 0 5;
#X obj 729 487 r loop_on_off;
#X text 191 114 Record;
#N canvas 204 322 450 300 into_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X text 238 67 to be a multiple of the block size.;
#X text 238 49 Force the length of the tables;
#X text 134 261 Pierre Massat \, Guitar extended \, 2013;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 585 400 pd into_blocks;
#X obj 569 450 s new_length;
#X obj 808 643 spigot;
#X obj 729 547 sel 1 0;
#X msg 729 580 bang;
#X msg 763 579 stop;
#X obj 727 659 s~ main_out;
#X obj 1149 83 t f f;
#X obj 1149 127 s loop_on_off;
#X obj 729 527 t f f;
#X obj 828 622 s stop_looping;
#X obj 176 428 r stop_looping;
#X obj 808 672 s new_cycle;
#X obj 195 449 r new_cycle;
#N canvas 958 513 251 363 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 172 299 pd limiter;
#X obj 1007 71 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1007 147 s empty_table;
#X obj 729 507 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 1061 751 Pierre Massat \, Guitar Extended \, 2013;
#X text 811 567 Here we play the table (loop) continuously.;
#X text 84 538 This is where the recording happens.;
#X text 417 251 Get the duration between;
#X text 417 263 two beats...;
#X text 418 295 ... divide it by 4 (we;
#X text 418 308 assume that there are 4;
#X text 418 319 beats in a bar)...;
#X text 395 335 ...and compute the length;
#X text 395 349 of the table in samples \, as;
#X text 396 376 block size.;
#X text 396 364 a multiple of the;
#X obj 1149 63 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 114 178 adc~;
#X obj 453 654 dac~;
#X msg 694 488 1;
#X obj 1007 91 t b b;
#X obj 1007 114 del 2;
#X text 1120 14 Audio On/Off;
#X text 997 27 Clear;
#X obj 698 463 r new_length;
#X obj 986 709 soundfiler;
#X obj 995 498 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 698 717 And if you really happy with your loop \,;
#X text 794 735 save it as a .wav file !;
#N canvas 785 538 345 360 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 452 630 pd limiter;
#X obj 1176 108 switch~;
#N canvas 175 136 691 422 reverse 0;
#X obj 120 109 bng 15 250 50 0 empty empty Reverse_me 18 7 0 8 -262144
-1 -1;
#X obj 120 200 until;
#X obj 186 228 + 1;
#X obj 154 228 f;
#X obj 145 176 s \$1-length;
#X obj 323 335 table tempArray;
#X obj 120 152 t f f f;
#X obj 244 196 s tempArray;
#X msg 244 172 resize \$1;
#X obj 75 308 tabwrite tempArray;
#X obj 520 51 sel;
#X obj 596 41 - 1;
#X obj 596 17 r \$1-length;
#X obj 154 254 t f f f;
#X obj 67 278 s \$1-eof;
#X obj 520 18 r \$1-eof;
#X obj 520 123 until;
#X obj 520 98 f;
#X obj 520 156 f;
#X obj 552 156 - 1;
#X obj 571 103 r \$1-length;
#X obj 539 74 r \$1-length;
#X obj 520 208 tabread tempArray;
#X obj 584 255 f;
#X obj 603 231 r \$1-length;
#X obj 584 304 mod;
#X obj 603 279 r \$1-length;
#X obj 614 255 + 1;
#X obj 520 181 t f b;
#X obj 571 126 - 1;
#X text 53 335 Copies array to a temporary location.;
#X msg 337 124 0;
#X obj 337 148 s clr2;
#X obj 463 110 r clr2;
#X obj 173 200 r clr2;
#X obj 120 128 arraysize bande;
#X obj 179 281 tabread bande;
#X obj 520 335 tabwrite bande;
#X obj 120 42 inlet;
#X obj 471 368 sel 0;
#X text 515 377 Bang when done copying;
#X obj 471 390 outlet;
#X text 206 396 (Taken and adapted from Pd's help);
#X connect 0 0 31 0;
#X connect 0 0 35 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 2 0;
#X connect 3 0 13 0;
#X connect 6 0 1 0;
#X connect 6 1 4 0;
#X connect 6 2 8 0;
#X connect 8 0 7 0;
#X connect 10 0 17 0;
#X connect 11 0 10 1;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 13 1 36 0;
#X connect 13 2 9 1;
#X connect 15 0 10 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 18 0 28 0;
#X connect 19 0 18 1;
#X connect 20 0 29 0;
#X connect 21 0 17 1;
#X connect 22 0 37 0;
#X connect 23 0 25 0;
#X connect 23 0 27 0;
#X connect 24 0 23 1;
#X connect 25 0 37 1;
#X connect 26 0 25 1;
#X connect 27 0 23 1;
#X connect 28 0 22 0;
#X connect 28 0 39 0;
#X connect 28 1 23 0;
#X connect 29 0 18 1;
#X connect 31 0 32 0;
#X connect 33 0 18 1;
#X connect 34 0 3 1;
#X connect 35 0 6 0;
#X connect 36 0 9 0;
#X connect 38 0 0 0;
#X connect 39 0 41 0;
#X restore 1172 484 pd reverse;
#X obj 1172 421 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1172 442 t b b;
#X obj 453 610 *~;
#X obj 468 589 line~;
#X obj 468 569 pack 0 5;
#X msg 1202 508 0;
#X obj 1172 462 del 5;
#X msg 1172 508 1;
#X obj 380 524 r~ main_out;
#X obj 1172 536 s vol-output;
#X obj 430 544 r vol-output;
#X text 1155 398 Reverse it !!!;
#X obj 1125 149 s vol-output;
#X obj 134 483 tabwrite~ bande_l;
#X obj 727 621 tabplay~ bande_l;
#X msg 899 687 write -wave \$1.wav bande_l;
#X obj 421 21 notein;
#X floatatom 387 69 5 0 0 0 - - -, f 5;
#X floatatom 431 76 5 0 0 0 - - -, f 5;
#X floatatom 467 70 5 0 0 0 - - -, f 5;
#X text 384 89 note;
#X text 424 90 Vel;
#X text 468 91 Chan;
#X obj 607 78 onebang 1;
#X obj 470 111 trigger bang;
#X obj 415 143 s balls;
#X obj 340 157 spigot;
#X floatatom 348 214 5 0 0 0 - - -, f 5;
#X obj 326 121 == 61;
#X obj 368 121 != 0;
#X obj 256 484 tabwrite~ bande_r;
#N canvas 1081 94 416 374 tools 0;
#X obj -2910 19 r new_length;
#X obj -2871 85 r empty_table;
#X msg -2887 107 \; bande_l const 0 \;;
#X msg -2910 39 \; bande_l resize \$1 \;;
#X obj -2871 157 table bande_l;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X restore 1085 215 pd tools;
#X obj 684 33 r loop_metronome;
#X obj 604 581 step;
#X obj 682 104 mod 4;
#X obj 687 67 float;
#X obj 729 88 + 1;
#X obj 624 199 select 0;
#X obj 564 284 * 1;
#X obj 842 475 clock;
#X obj 891 406 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 836 191 monorhythm;
#X obj 1285 609 time;
#X floatatom 1202 673 5 0 0 0 - - -, f 5;
#X obj 930 646 savepanel;
#X obj 1012 653 pack;
#X obj 1034 506 t b b;
#X obj 1073 677 print;
#X msg 1160 627 smartypants;
#X msg 846 65 4;
#X msg 849 90 8;
#X floatatom 883 36 5 0 0 0 - - -, f 5;
#X obj 892 70 s tempo;
#X msg 850 118 16;
#X text 751 150 should add monorhythmwill remove a host of other crap
;
#X msg 994 595 symbol /home/mike/Dropbox/reaper/pd;
#N canvas 543 199 883 545 metronomthingy 0;
#X floatatom 634 149 5 0 0 0 - - -, f 5;
#X floatatom 627 230 5 0 0 0 - - -, f 5;
#X obj 627 198 expr (60/$f1)*1000;
#X text 663 161 bpm;
#X text 745 200 convert to ms;
#X text 670 231 ms;
#X obj 600 275 metro;
#X obj 600 238 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 556 238 on/off;
#X text 638 275 outputs bang every 'x' ms;
#X obj 615 388 osc~ 800;
#X obj 600 432 *~;
#X obj 600 357 vline~;
#X obj 600 471 output~;
#X text 694 305 got to 1 (full volume) in 20 \, then go to zero (no
volume) in 20 ms after waiting 20 ms;
#X text 648 356 translate to audio rate signal;
#X text 678 389 generate 800 hz sine tone;
#X text 630 431 multiply sine tone by amplitude envelope;
#X msg 321 184 \; pd dsp 1;
#X obj 321 135 lbang;
#X msg 600 308 1 1 \, 0 1 5;
#X obj 840 136 cnv 1 100 60 empty flash empty 20 12 0 14 -262144 -262144
0;
#X obj 429 244 f;
#X obj 429 180 bng 8 50 20 0 empty flash empty 17 7 0 10 -262144 -258113
-262144;
#X obj 370 352 delay;
#X msg 429 351 13;
#X obj 397 285 / 2;
#X msg 370 383 0;
#X text 455 351 colour;
#X text 442 286 half the time!;
#X text 397 380 the other colour;
#X msg 428 482 \; flash color \$1 \; flash size \$2;
#X obj 428 445 pack f f;
#X msg 473 408 60;
#X obj 370 414 t f f;
#X obj 438 318 t f f;
#X text 504 409 size;
#X obj 811 239 s loop_metronome;
#X obj 600 119 r tempo;
#X connect 0 0 2 0;
#X connect 1 0 6 1;
#X connect 1 0 22 1;
#X connect 2 0 1 0;
#X connect 6 0 20 0;
#X connect 6 0 23 0;
#X connect 6 0 37 0;
#X connect 7 0 6 0;
#X connect 10 0 11 1;
#X connect 11 0 13 0;
#X connect 11 0 13 1;
#X connect 12 0 11 0;
#X connect 19 0 18 0;
#X connect 20 0 12 0;
#X connect 22 0 26 0;
#X connect 22 0 35 0;
#X connect 23 0 22 0;
#X connect 23 0 24 0;
#X connect 24 0 27 0;
#X connect 25 0 32 0;
#X connect 26 0 24 1;
#X connect 27 0 34 0;
#X connect 32 0 31 0;
#X connect 33 0 32 1;
#X connect 34 0 32 0;
#X connect 34 1 32 1;
#X connect 35 0 25 0;
#X connect 35 1 33 0;
#X connect 38 0 0 0;
#X restore 768 335 pd metronomthingy;
#X connect 0 0 11 0;
#X connect 1 0 14 0;
#X connect 2 0 1 1;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 98 0;
#X connect 5 0 4 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 73 0;
#X connect 9 0 28 0;
#X connect 10 0 9 1;
#X connect 11 0 10 0;
#X connect 12 0 31 0;
#X connect 14 0 15 0;
#X connect 16 0 26 0;
#X connect 16 0 74 0;
#X connect 17 0 18 0;
#X connect 17 1 19 0;
#X connect 18 0 26 0;
#X connect 18 0 74 0;
#X connect 19 0 24 0;
#X connect 19 0 74 0;
#X connect 21 0 22 0;
#X connect 21 0 72 0;
#X connect 21 1 58 0;
#X connect 23 0 17 0;
#X connect 23 1 16 1;
#X connect 25 0 73 0;
#X connect 27 0 73 0;
#X connect 28 0 8 1;
#X connect 29 0 48 0;
#X connect 31 0 23 0;
#X connect 44 0 21 0;
#X connect 45 0 9 0;
#X connect 47 0 31 0;
#X connect 48 0 49 0;
#X connect 48 1 30 0;
#X connect 49 0 30 0;
#X connect 52 0 47 0;
#X connect 54 0 102 0;
#X connect 54 0 115 0;
#X connect 54 0 106 0;
#X connect 57 0 46 0;
#X connect 57 0 46 1;
#X connect 59 0 67 0;
#X connect 60 0 61 0;
#X connect 61 0 66 0;
#X connect 61 1 65 0;
#X connect 62 0 57 0;
#X connect 63 0 62 1;
#X connect 64 0 63 0;
#X connect 65 0 69 0;
#X connect 66 0 59 0;
#X connect 67 0 69 0;
#X connect 68 0 62 0;
#X connect 70 0 64 0;
#X connect 74 0 20 0;
#X connect 74 1 16 0;
#X connect 75 0 53 0;
#X connect 76 0 77 0;
#X connect 76 1 78 0;
#X connect 76 2 79 0;
#X connect 77 0 88 0;
#X connect 78 0 84 0;
#X connect 78 0 89 0;
#X connect 83 0 5 0;
#X connect 84 0 83 0;
#X connect 84 0 85 0;
#X connect 86 0 87 0;
#X connect 88 0 86 1;
#X connect 89 0 86 1;
#X connect 92 0 95 0;
#X connect 94 0 97 0;
#X connect 95 0 96 0;
#X connect 95 0 94 0;
#X connect 96 0 95 1;
#X connect 97 0 5 0;
#X connect 98 0 6 0;
#X connect 100 0 99 0;
#X connect 102 3 103 0;
#X connect 104 0 75 0;
#X connect 105 0 107 0;
#X connect 106 0 115 0;
#X connect 106 1 108 0;
#X connect 108 0 105 0;
#X connect 109 0 94 1;
#X connect 110 0 94 1;
#X connect 111 0 112 0;
#X connect 113 0 94 1;
#X connect 115 0 105 0;
#X connect 115 0 104 0;
